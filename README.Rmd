---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# shinybody

<!-- badges: start -->
<!-- badges: end -->

`shinybody` is an `htmlwidget` of the human body that allows you to hide/show and assign colors to 82 different body parts.
The `human` widget is an `htmlwidget`, so it works in Quarto documents, R Markdown documents, or anything other HTML medium.
It also functions as an input/output widget in a `shiny` app. 

## Installation

You can install the development version of `shinybody` from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("robert-norberg/shinybody")
```

## Example

Here is a simple example of using the `human` widget in an R Markdown document:

```{r example, eval = FALSE}
library(shinybody)

human(
  gender = "female",
  shown = c("trachea", "stomach", "duodenum", "esophagus", "small_intestine"),
  selected = c("esophagus", "duodenum"),
  hovertext = NULL,
  show_color = "black",
  select_color = "yellow"
)
```

<img src="man/figures/README-demo-1.png" width="100%" />

Here is a complete list of the organs that are available:

```{r}
organ_names <- sort(union(
  names(shinybody:::organ_to_id[["male"]]),
  names(shinybody:::organ_to_id[["female"]])
))
all_organs <- data.frame(
  row.names = organ_names,
  Male = ifelse(organ_names %in% names(shinybody:::organ_to_id[["male"]]), "✅", "❌"),
  Female = ifelse(organ_names %in% names(shinybody:::organ_to_id[["female"]]), "✅", "❌")
)

all_organs
```

Here is a very simple shiny app using the `human` widget:

```{r, eval = FALSE}
library(shiny)
library(shinybody)

ui <- function() {
  fluidPage(
    selectInput(
      inputId = "gender",
      label = "Select Gender",
      choices = c("male", "female"),
      multiple = FALSE,
      selected = "male"
    ),
    selectInput(
      inputId = "body_parts",
      label = "Select Body Parts to Show",
      choices = names(shinybody:::organ_to_id[["male"]]),
      multiple = TRUE,
      selected = names(shinybody:::organ_to_id[["male"]])[1:5]
    ),
    humanOutput(outputId = "human_widget"),
    verbatimTextOutput(outputId = "clicked_body_part_msg")
  )
}

server <- function(input, output, session) {
  observe({
    g <- input$gender
    
    updateSelectInput(
      session = session,
      inputId = "body_parts",
      choices = names(shinybody:::organ_to_id[[g]]),
      selected = names(shinybody:::organ_to_id[[g]])[1:5]
    )
  })
  
  output$human_widget <- renderHuman({
    human(
      gender = input$gender,
      shown = input$body_parts,
      selected = NULL,
      show_color = "black",
      select_color = "red",
      hovertext = NULL
    )
  })
  output$clicked_body_part_msg <- renderPrint({
    paste("You Clicked:", input$clicked_body_part)
  })
}

shinyApp(ui = ui, server = server)
```

<img src="man/figures/README-demo-2.png" width="100%" />

